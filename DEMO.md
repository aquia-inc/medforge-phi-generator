# MedForge Demo Script

## Customer Demo: Synthetic PHI Data Generator for MS Purview DLP Training

**Audience:** CMS stakeholders
**Duration:** 10-15 minutes
**Goal:** Show how MedForge generates realistic synthetic PHI documents at scale for training Microsoft Purview classifiers

---

## Pre-Demo Setup

```bash
# Make sure you have a small batch ready to walk through
cd ~/Desktop/synth_phi_data
rm -rf output/medforge  # Start fresh
uv run python -m src.cli generate --count 50 --parallel-workers 2
```

---

## Part 1: The Problem We're Solving (2 min)

**Talking Points:**

- "To train Purview DLP effectively, Microsoft recommends 200-500 positive examples and 2-3x that in negatives"
- "Problem: We can't use real PHI for training - HIPAA violations, privacy concerns"
- "Solution: Generate realistic synthetic medical documents that look exactly like real PHI but contain zero actual patient data"
- "This gives us unlimited training data without any compliance risk"

---

## Part 2: Walk Through the Output Structure (3 min)

```bash
# Show the folder structure
ls -la output/medforge/

# Two main folders - this is what Purview needs
ls output/medforge/phi_positive/ | head -10
ls output/medforge/phi_negative/ | head -10
```

**Talking Points:**

- "Documents are automatically sorted into two folders:"
  - **phi_positive/** - Contains synthetic patient identifiers + medical data (what Purview should CATCH)
  - **phi_negative/** - Medical context but NO patient data (what Purview should IGNORE)
- "This exact structure is ready to upload directly to Purview for classifier training"

---

## Part 3: Examine PHI-Positive Documents (4 min)

### Progress Note (DOCX)
```bash
# Open a progress note
libreoffice output/medforge/phi_positive/ProgressNote_*.docx &
```

**Talking Points:**
- "This is a clinical progress note - SOAP format that physicians actually use"
- "Notice the PHI elements:"
  - Patient name, date of birth, MRN (Medical Record Number)
  - Diagnoses with real ICD-10 codes
  - Medications, dosages, allergies
  - Provider signature with NPI number
- "All of this data is generated by Faker - completely synthetic, but follows real medical data patterns"

### Lab Result (PDF)
```bash
# Open a lab result
evince output/medforge/phi_positive/LabResult_*.pdf &
```

**Talking Points:**
- "Lab results in PDF - common format in healthcare"
- "Patient demographics tied to actual test values"
- "Reference ranges, flags for abnormal values - just like a real lab report"
- "The combination of patient ID + medical data = PHI that Purview needs to detect"

### Email with Attachment (EML)
```bash
# Show an email file
cat output/medforge/phi_positive/EmailWithAttachment_*.eml | head -50
```

**Talking Points:**
- "Provider-to-provider emails are a major PHI leak vector"
- "These include patient details in the body AND attachments"
- "Tests Purview's ability to scan nested content - email body plus PDF/DOCX attachments"

### Case Study Presentation (PPTX)
```bash
libreoffice output/medforge/phi_positive/CaseStudy_*.pptx &
```

**Talking Points:**
- "Medical case presentations - common in teaching hospitals"
- "Patient data embedded in slides"
- "Another format Purview needs to scan"

---

## Part 4: Examine PHI-Negative Documents (2 min)

```bash
# Open a policy email (no patient data)
cat output/medforge/phi_negative/Announcement_*.eml | head -30

# Open an educational presentation
libreoffice output/medforge/phi_negative/Educational_*.pptx &
```

**Talking Points:**
- "These documents have medical terminology and healthcare context"
- "But NO patient identifiers - no names, MRNs, DOBs tied to medical info"
- "Policy updates, staff announcements, educational materials"
- "Purview should NOT flag these as PHI violations"
- "Training with good negatives reduces false positives in production"

---

## Part 5: Scale Demo - Generate 1000 Documents (2 min)

```bash
# Delete current output
rm -rf output/medforge/

# Generate at scale with progress bar
uv run python -m src.cli generate --count 1000 --parallel-workers 4 --llm-percentage 0.2
```

**Talking Points (while it runs):**
- "Now watch how fast we can generate at scale"
- "1000 documents, 4 parallel workers"
- "80/20 split: 800 PHI-positive, 200 PHI-negative"
- "20% of documents get LLM enhancement - let me explain what that means..."

---

## Part 6: What the LLM Does (2 min)

**Talking Points:**

- "Most documents use template-based generation - fast, consistent, predictable"
- "But 20% get enhanced by Claude AI (Anthropic's LLM)"
- "The AI generates realistic clinical narratives:"
  - Varied sentence structure and medical phrasing
  - Natural-sounding SOAP notes that read like a real physician wrote them
  - Provider-to-provider emails with appropriate tone and detail
- "This prevents Purview from just pattern-matching on our templates"
- "Makes the training data more robust - classifier learns actual PHI patterns, not just our specific wording"

**Show an LLM-enhanced document:**
```bash
# Check the manifest for LLM-enhanced docs
cat output/medforge/metadata/manifest.json | grep -A5 '"llm_enhanced": true' | head -20
```

---

## Part 7: Format Distribution (1 min)

```bash
# Show the stats
uv run python -m src.cli stats output/medforge/
```

**Talking Points:**
- "Automatic distribution across 5 formats:"
  - **DOCX** (~35-40%) - Progress notes, registration forms
  - **PDF** (~20%) - Lab results, official documents
  - **EML** (~25-30%) - Emails, including nested attachments
  - **PPTX** (~15-20%) - Case studies, educational materials
  - **XLSX** - Patient lists, lab panels (configurable)
- "Matches the real-world format distribution in healthcare settings"

---

## Part 8: Configuration & Reproducibility (1 min)

```bash
# Show CLI options
uv run python -m src.cli generate --help
```

**Talking Points:**
- "Fully configurable via command line or YAML config file"
- "Set exact counts, format ratios, LLM percentage"
- "Use `--seed` for reproducible generation - same seed = same documents"
- "Can generate specific categories only if needed"

---

## Wrap-Up: Key Takeaways

| Feature | Benefit |
|---------|---------|
| **100% Synthetic** | Zero compliance risk, unlimited training data |
| **PHI-Positive/Negative Split** | Ready for Purview classifier training |
| **5 File Formats** | Covers real-world healthcare document types |
| **Nested Emails** | Tests attachment scanning capability |
| **LLM Enhancement** | Prevents overfitting to templates |
| **Parallel Generation** | 1000 docs in ~2 minutes |
| **Reproducible** | Seed-based generation for consistency |

---

## Q&A Prep - Anticipated Questions

**Q: How realistic is the medical data?**
> Uses Faker with medical extensions - generates valid-looking MRNs, ICD-10 codes, NPI numbers, medication names, lab values with appropriate ranges. Passes visual inspection by clinicians.

**Q: Can we customize the document types?**
> Yes - the template system is modular. We can add CMS-specific forms, match your existing document layouts, add new categories.

**Q: What about non-English documents?**
> Architecture supports multilingual via Faker locales (Spanish, Chinese, Vietnamese). Not yet implemented but straightforward to add.

**Q: How do we know the PHI detection is accurate?**
> Built-in validator checks every document for required PHI elements (identifier + medical data). Manifest tracks exactly what PHI is in each file.

**Q: Can this generate CUI (Controlled Unclassified Information)?**
> That's phase 2 - same architecture, different data categories (financial, legal, procurement). Already scoped in our requirements.

---

## Commands Cheat Sheet

```bash
# Generate 100 documents (quick demo)
uv run python -m src.cli generate --count 100 --parallel-workers 4

# Generate 1000 with 20% LLM enhancement
uv run python -m src.cli generate --count 1000 --parallel-workers 4 --llm-percentage 0.2

# View statistics
uv run python -m src.cli stats output/medforge/

# Validate documents
uv run python -m src.cli validate output/medforge/

# Reproducible generation (same output every time)
uv run python -m src.cli generate --count 500 --seed 42
```
